(this["webpackJsonppiramide-usuarios"]=this["webpackJsonppiramide-usuarios"]||[]).push([[0],{160:function(e,t,a){e.exports=a(314)},314:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(33),u=a.n(s),c=a(23),o=a(24),l=a(26),i=a(25),p=a(16),d=a(5),m=a.n(d),f=a(14),h=a(142),v=a.n(h).a.create({baseURL:"https://fathomless-dawn-33033.herokuapp.com"}),g=a(15),b=a.n(g),j=a(322),E=(a(66),function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={usuario:{isLoading:!1,results:[],value:"",cedula:"",nombre:"",apellido:"",apellido2:"",padre:""},users:[],mensaje:"",source:[]},e.crearUsuario=Object(f.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.post("/users",e.state.usuario);case 2:a=t.sent,e.setState({mensaje:a.statusText});case 4:case"end":return t.stop()}}),t)}))),e.obtenerUsuarios=Object(f.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.get("/users");case 2:return a=(a=t.sent).data,t.next=6,e.setState({users:a});case 6:case"end":return t.stop()}}),t)}))),e.generateSource=function(){try{var t=e.state.users.map((function(e){return{title:e.nombre+" "+e.apellido+" "+e.apellido2,description:e.cedula}}));e.setState({source:t})}catch(a){}},e.borrarUsuario=function(e){v.delete("/users/2")},e.onInputChange=function(t){"cedula"===t.target.name&&e.setState({usuario:Object(p.a)(Object(p.a)({},e.state.usuario),{},{cedula:b.a.capitalize(t.target.value)})}),"nombre"===t.target.name&&e.setState({usuario:Object(p.a)(Object(p.a)({},e.state.usuario),{},{nombre:b.a.capitalize(t.target.value)})}),"apellido"===t.target.name&&e.setState({usuario:Object(p.a)(Object(p.a)({},e.state.usuario),{},{apellido:b.a.capitalize(t.target.value)})}),"apellido2"===t.target.name&&e.setState({usuario:Object(p.a)(Object(p.a)({},e.state.usuario),{},{apellido2:b.a.capitalize(t.target.value)})}),"padre"===t.target.name&&e.setState({usuario:Object(p.a)(Object(p.a)({},e.state.usuario),{},{padre:t.target.value})})},e.onFormSubmit=function(){var t=Object(f.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),e.setState({usuario:{cedula:"",nombre:"",apellido:"",apellido2:"",padre:""},mensaje:""}),setTimeout((function(){e.obtenerUsuarios()}),300);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleResultSelect=function(){var t=Object(f.a)(m.a.mark((function t(a,n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.result,e.setState({value:r.title,factura:!1}),e.setState({usuario:Object(p.a)(Object(p.a)({},e.state.usuario),{},{padre:r.description})});case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.handleSearchChange=function(t,a){var n=a.value;e.setState({isLoading:!0,value:n}),setTimeout((function(){if(e.state.value.length<1)return e.setState({isLoading:!1,results:[],value:""});var t=new RegExp(b.a.escapeRegExp(e.state.value),"i");e.setState({isLoading:!1,results:b.a.filter(e.state.source,(function(e){return t.test(e.title)}))})}),300)},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.obtenerUsuarios();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;this.state.users.length!==this.state.source.length&&this.generateSource();var t=this.state,a=t.isLoading,n=t.value,s=t.results;return r.a.createElement("div",null,r.a.createElement("form",{className:"ui form",onSubmit:this.onFormSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Padre"),r.a.createElement(j.a,Object.assign({style:{width:"20%",margin:"0px auto"},loading:a,onResultSelect:this.handleResultSelect,onSearchChange:b.a.debounce(this.handleSearchChange,500,{leading:!0}),results:s,value:n},this.props))),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"C\xe9dula"),r.a.createElement("input",{required:!0,name:"cedula",value:this.state.usuario.cedula,type:"text",onChange:this.onInputChange,style:{width:"20%"}})),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Nombre"),r.a.createElement("input",{required:!0,name:"nombre",value:this.state.usuario.nombre,type:"text",onChange:this.onInputChange,style:{width:"20%"}})),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Apellido"),r.a.createElement("input",{required:!0,name:"apellido",value:this.state.usuario.apellido,type:"text",onChange:this.onInputChange,style:{width:"20%"}})),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Apellido 2"),r.a.createElement("input",{required:!0,name:"apellido2",value:this.state.usuario.apellido2,type:"text",onChange:this.onInputChange,style:{width:"20%"}})),r.a.createElement("button",{className:"ui button",type:"submit",onClick:function(){e.crearUsuario(e.state.usuario)}},"Confirmar"),r.a.createElement("div",null,this.state.mensaje)))}}]),a}(r.a.Component)),S={isLoading:!1,results:[],value:"",user:[],padre:[],factura:!1,datosFact:{numero:"",valor:""},mensaje:""},y=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),u=0;u<n;u++)s[u]=arguments[u];return(e=t.call.apply(t,[this].concat(s))).state=S,e.source=[],e.crearFactura=Object(f.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.post("/facturas",e.state.datosFact);case 2:a=t.sent,e.setState({mensaje:a.statusText});case 4:case"end":return t.stop()}}),t)}))),e.obtenerUsuarios=Object(f.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.get("/users");case 2:a=(a=t.sent).data,e.setState({users:a});case 5:case"end":return t.stop()}}),t)}))),e.obtenerUsuario=function(){var t=Object(f.a)(m.a.mark((function t(a,n,r){var s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.get("/users?nombre=".concat(a,"&apellido=").concat(n,"&apellido2=").concat(r));case 2:s=(s=t.sent).data,e.setState({user:s});case 5:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),e.obtenerPadre=function(){var t=Object(f.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.get("/users?cedula=".concat(a));case 2:n=(n=t.sent).data,e.setState({padre:n});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleResultSelect=function(){var t=Object(f.a)(m.a.mark((function t(a,n){var r,s,u,c,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.result,e.setState({value:r.title,factura:!1}),t.prev=2,s=b.a.split(r.title," "),u=s[0],c=s[1],o=s[2],t.next=9,e.obtenerUsuario(u,c,o);case 9:return t.next=11,e.obtenerPadre(e.state.user[0].padre);case 11:t.next=15;break;case 13:t.prev=13,t.t0=t.catch(2);case 15:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e,a){return t.apply(this,arguments)}}(),e.handleSearchChange=function(t,a){var n=a.value;e.setState({isLoading:!0,value:n}),setTimeout((function(){if(e.state.value.length<1)return e.setState(S);var t=new RegExp(b.a.escapeRegExp(e.state.value),"i");e.setState({isLoading:!1,results:b.a.filter(e.source,(function(e){return t.test(e.title)}))})}),300)},e.onInputChange=function(t){"numeroFact"==t.target.name&&e.setState({datosFact:Object(p.a)(Object(p.a)({},e.state.datosFact),{},{numero:b.a.capitalize(t.target.value)})}),"totalFact"==t.target.name&&e.setState({datosFact:Object(p.a)(Object(p.a)({},e.state.datosFact),{},{valor:b.a.capitalize(t.target.value)})})},e.onFormSubmit=function(t){t.preventDefault(),e.setState({datosFact:{numero:"",valor:"",usuario:""},mensaje:""}),e.crearFactura()},e.renderFormFactura=function(){if(e.state.factura)return r.a.createElement("div",{style:{width:"40%",margin:"10px auto"}},r.a.createElement("h3",null,"Datos de facturas"),r.a.createElement("form",{className:"ui form",onSubmit:e.onFormSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"N\xfamero"),r.a.createElement("input",{type:"text",required:"true",name:"numeroFact",value:e.state.datosFact.numero,placeholder:"N\xfamero de factura",onChange:e.onInputChange})),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Total"),r.a.createElement("input",{type:"text",required:"true",name:"totalFact",value:e.state.datosFact.valor,placeholder:"Total",onChange:e.onInputChange})),r.a.createElement("button",{type:"submit",style:{marginTop:"10px"},className:"ui button",onClick:function(){e.setState({factura:!0})}},"Agregar")),r.a.createElement("div",null,e.state.mensaje))},e.renderUserInfo=function(){var t={},a=" ",n={display:"none"};if(0!=e.state.padre.length&&(n={display:"block"},t=e.state.padre[0],a="Vendedor padre: ".concat(t.nombre," ").concat(t.apellido," ").concat(t.apellido2)),0!=e.state.user.length)return r.a.createElement("div",null,r.a.createElement("div",{className:"ui segments",style:{width:"40%",margin:"10px auto"}},r.a.createElement("div",{className:"ui segment"},r.a.createElement("p",null,"Nombre: ",e.state.user[0].nombre+" "+e.state.user[0].apellido+" "+e.state.user[0].apellido2)),r.a.createElement("div",{className:"ui segment",style:n},r.a.createElement("p",null,a)),r.a.createElement("div",{className:"ui segment"},r.a.createElement("p",null,"C\xe9dula: ",e.state.user[0].cedula))),r.a.createElement("button",{style:{marginTop:"10px"},className:"ui button",onClick:function(){e.setState({factura:!0,datosFact:Object(p.a)(Object(p.a)({},e.state.datosFact),{},{usuario:e.state.user[0].cedula})})}},"Agregar Factura"),e.renderFormFactura())},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.obtenerUsuarios();case 2:try{this.source=this.state.users.map((function(e){return{title:e.nombre+" "+e.apellido+" "+e.apellido2,description:e.cedula}}))}catch(t){}case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.value,n=e.results;return r.a.createElement("div",null,r.a.createElement("h2",null,"Consulta de vendedor"),r.a.createElement(j.a,Object.assign({loading:t,onResultSelect:this.handleResultSelect,onSearchChange:b.a.debounce(this.handleSearchChange,500,{leading:!0}),results:n,value:a},this.props)),this.renderUserInfo())}}]),a}(r.a.Component),x={isLoading:!1,results:[],value:"",user:[],padre:[],factura:[],mensaje:""},w=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),u=0;u<n;u++)s[u]=arguments[u];return(e=t.call.apply(t,[this].concat(s))).state=x,e.source=[],e.crearFactura=Object(f.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.post("/facturas",e.state.datosFact);case 2:a=t.sent,e.setState({mensaje:a.statusText});case 4:case"end":return t.stop()}}),t)}))),e.obtenerFacturas=Object(f.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.get("/facturas");case 2:a=(a=t.sent).data,e.setState({facturas:a});case 5:case"end":return t.stop()}}),t)}))),e.obtenerUsuario=function(){var t=Object(f.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.get("/users?cedula=".concat(a));case 2:n=(n=t.sent).data,e.setState({user:n});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.obtenerPadre=function(){var t=Object(f.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.get("/users?cedula=".concat(a));case 2:n=(n=t.sent).data,e.setState({padre:n});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.obtenerFactura=function(){var t=Object(f.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.get("/facturas?numero=".concat(a));case 2:n=(n=t.sent).data,e.setState({factura:n});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleResultSelect=function(){var t=Object(f.a)(m.a.mark((function t(a,n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.result,e.setState({value:r.title}),t.prev=2,t.next=5,e.obtenerFactura(r.title);case 5:return t.next=7,e.obtenerUsuario(e.state.factura[0].usuario);case 7:return t.next=9,e.obtenerPadre(e.state.user[0].padre);case 9:t.next=13;break;case 11:t.prev=11,t.t0=t.catch(2);case 13:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e,a){return t.apply(this,arguments)}}(),e.handleSearchChange=function(t,a){var n=a.value;e.setState({isLoading:!0,value:n}),setTimeout((function(){if(e.state.value.length<1)return e.setState(x);var t=new RegExp(b.a.escapeRegExp(e.state.value),"i");e.setState({isLoading:!1,results:b.a.filter(e.source,(function(e){return t.test(e.title)}))})}),300)},e.renderFacturaInfo=function(){var t={},a={},n="",s={display:"none"};if(0!=e.state.user.length&&(t=e.state.user[0]),0!=e.state.padre.length&0!=e.state.factura.length&&(a=e.state.padre[0],s={display:"block"},n="Total a pagar a ".concat(a.nombre," ").concat(a.apellido," ").concat(a.apellido2,": \u20a1 ").concat(e.calcularPorcentaje(e.state.factura[0].valor,e.props.porcentajepadre))),0!=e.state.factura.length)return r.a.createElement("div",null,r.a.createElement("div",{className:"ui segments",style:{width:"40%",margin:"10px auto"}},r.a.createElement("div",{className:"ui segment"},r.a.createElement("p",null,"Vendedor: ",t.nombre+" "+t.apellido+" "+t.apellido2)),r.a.createElement("div",{className:"ui segment"},r.a.createElement("p",null,"N\xfamero de factura: ",e.state.factura[0].numero)),r.a.createElement("div",{className:"ui segment"},r.a.createElement("p",null,"Valor: \u20a1",e.state.factura[0].valor)),r.a.createElement("div",{className:"ui segment"},r.a.createElement("p",null,"Total a pagar a vendedor: \u20a1",e.calcularPorcentaje(e.state.factura[0].valor,e.props.porcentajevendedor))),r.a.createElement("div",{className:"ui segment",style:s},r.a.createElement("p",null,n))))},e}return Object(o.a)(a,[{key:"calcularPorcentaje",value:function(e,t){return b.a.toInteger(e)*t/100}},{key:"componentDidMount",value:function(){var e=Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.obtenerFacturas();case 2:try{this.source=this.state.facturas.map((function(e){return{title:e.numero}}))}catch(t){}case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.value,n=e.results;return r.a.createElement("div",null,r.a.createElement("h2",null,"Consulta de factura"),r.a.createElement(j.a,Object.assign({loading:t,onResultSelect:this.handleResultSelect,onSearchChange:b.a.debounce(this.handleSearchChange,500,{leading:!0}),results:n,value:a},this.props)),this.renderFacturaInfo())}}]),a}(r.a.Component),O=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={porcVend:0,porcPadre:0},e.onInputChange=function(t){"porcVend"==t.target.name&&e.setState({porcVend:t.target.value}),"porcPadre"==t.target.name&&e.setState({porcPadre:t.target.value})},e.onFormSubmit=function(t){t.preventDefault(),e.props.onConfiguracionSubmit(e.state)},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.setState({porcPadre:this.props.porcPadre,porcVend:this.props.porcVend})}},{key:"render",value:function(){return r.a.createElement("form",{className:"ui form",onSubmit:this.onFormSubmit},r.a.createElement("h3",null,"Configuracion"),r.a.createElement("div",{className:"field",style:{width:"40%",margin:"0px auto"}},r.a.createElement("label",null,"Porcentaje a pagar al vendedor"),r.a.createElement("input",{type:"number",required:"true",name:"porcVend",value:this.state.porcVend,onChange:this.onInputChange,style:{width:"20%"}}),r.a.createElement("label",null,"Porcentaje a pagar al padre"),r.a.createElement("input",{type:"number",required:"true",name:"porcPadre",value:this.state.porcPadre,onChange:this.onInputChange,style:{width:"20%"}}),r.a.createElement("button",{className:"ui button",type:"submit",style:{margin:"10px auto",display:"block"}},"Guardar"),r.a.createElement("p",null,this.state.mensaje)))}}]),a}(r.a.Component),C=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),u=0;u<n;u++)s[u]=arguments[u];return(e=t.call.apply(t,[this].concat(s))).state={menu:"",porcentajeVendedor:0,porcentajePadre:0},e.onMenuChange=function(t){"agregar"===t.target.name&&e.setState({menu:"agregar"}),"vendedores"===t.target.name&&e.setState({menu:"vendedores"}),"facturas"===t.target.name&&e.setState({menu:"facturas"}),"configuracion"===t.target.name&&e.setState({menu:"configuracion"})},e.onConfiguracionSubmit=function(t){var a=t.porcVend,n=t.porcPadre;e.setState({porcentajePadre:n,porcentajeVendedor:a})},e.renderMenu=function(){return"agregar"===e.state.menu?r.a.createElement(E,null):"vendedores"===e.state.menu?r.a.createElement(y,null):"facturas"===e.state.menu?r.a.createElement(w,{porcentajepadre:e.state.porcentajePadre,porcentajevendedor:e.state.porcentajeVendedor}):"configuracion"===e.state.menu?r.a.createElement(O,{porcVend:e.state.porcentajeVendedor,porcPadre:e.state.porcentajePadre,onConfiguracionSubmit:e.onConfiguracionSubmit}):""===e.state.menu?r.a.createElement(y,null):void 0},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui container",style:{marginTop:"10px",width:"100%"}},r.a.createElement("div",{className:"ui four item menu"},r.a.createElement("a",{name:"agregar",className:"item",onClick:this.onMenuChange},"Agregar Vendedor"),r.a.createElement("a",{name:"vendedores",className:"item",onClick:this.onMenuChange},"Consultar Vendedor"),r.a.createElement("a",{name:"facturas",className:"item",onClick:this.onMenuChange},"Consultar Facturas"),r.a.createElement("a",{name:"configuracion",className:"item",onClick:this.onMenuChange},"Configuraci\xf3n")),r.a.createElement("div",{className:"ui center aligned segment"},this.renderMenu()))}}]),a}(r.a.Component);u.a.render(r.a.createElement(C,null),document.getElementById("root"))},66:function(e,t,a){}},[[160,1,2]]]);
//# sourceMappingURL=main.e114ce0c.chunk.js.map